{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "stage9_buyer_summary.schema.json",
  "title": "Stage 9 - Buyer Summary Output Schema (Stub)",
  "type": "object",
  "additionalProperties": false,
  "required": ["listing_id", "source_snapshot_id", "created_at", "stage_name", "stage_version", "payload"],
  "properties": {
    "listing_id": { "type": "string" },
    "source_snapshot_id": { "type": "string" },
    "created_at": { "type": "string", "format": "date-time" },
    "stage_name": { "type": "string", "const": "stage9_buyer_summary" },
    "stage_version": { "type": "string" },
    "payload": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "overall_score",
        "verdict",
        "key_pros",
        "key_cons",
        "follow_up_questions",
        "negotiation_tips",
        "recommended_actions",
        "known_unknowns",
        "confidence"
      ],
      "properties": {
        "overall_score": { "type": "number", "minimum": 0, "maximum": 10 },
        "verdict": { "type": "string" },
        "key_pros": { "type": "array", "items": { "type": "string" }, "default": [] },
        "key_cons": { "type": "array", "items": { "type": "string" }, "default": [] },
        "follow_up_questions": { "type": "array", "items": { "type": "string" }, "default": [] },
        "negotiation_tips": { "type": "array", "items": { "type": "string" }, "default": [] },
        "recommended_actions": { "type": "array", "items": { "type": "string" }, "default": [] },
        "known_unknowns": { "type": "array", "items": { "type": "string" }, "default": [] },
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
      }
    }
  }
}